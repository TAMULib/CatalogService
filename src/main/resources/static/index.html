<html>
<head>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<title>GIFM Viewer</title>
	<meta name="description" content="">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<link rel="shortcut icon" href="../static/images/favicon.ico" type="image/x-icon" />
	<link rel="stylesheet" href="../static/css/bootstrap.min.css" type="text/css" />

	<style type="text/css">
		/* Hide the page until the WRO css is loaded by the javascript */
		body {
			display: none;
		}
		
		form#getButtons {
			margin: 40px;
			margin-bottom: 0;
			padding: 10px;
		}

		label {
			display: block;
			margin: 4px;
			padding: 6px;
		}
		
		body > .container .row > div {
			min-height: 120px;
		}

		/* Demonstrates how the default button styling can be overridden */
		#theOverriddenButtons .button-gifm {
			border-radius: 0;
			border: 2px solid #0769AD;
			background-color: #5DB8F4;
			color: #fff;
		}

		#theOverriddenButtons .button-gifm:hover {
			background-color: #dfdfdf;
		}
		
		.checkbox-inline, .radio-inline {
			vertical-align: bottom;
		}

	</style>

	<script src="../static/js/lib/modernizr-2.8.3.min.js"></script>

</head>
<body>
	<header class="container-fluid global-nav">
		<div class="row">
			<div class="col-lg-12">					
				<nav class="global-nav pull-right hidden-xs">
					<ul class="nav global-nav pull-right hidden-xs">
			        	<li><a href="#">Hours</a></li>
			          	<li><a href="#">Libraries</a></li>
			          	<li><a href="#">Ask Us</a></li>
			        </ul>
				</nav>
			</div>
		</div>
	</header>

	<header class="container-fluid site-title">
		<div class="container">
			<div class="row">
				<div class="col-md-3">
					<h1 class="tamu-lib"><a href="http://library.tamu.edu">Texas A&amp;M University Libraries</a></h1>
				</div>
				<div class="col-md-9">
					<div class="site"><h3>GIFM Viewer</h3></div>
				</div>
			</div>
		</div>
	</header>
	<div class="container">
		<div class="row">
			<div class="col-xs-12 col-md-6">
				<form id="getButtons">
					<label for="bibId">Enter a BIBID to generate GIFM Buttons</label>
					<div class="input-group">
						<input type="text" class="form-control" name="bibId" id="bibId" value="1892485" />
						<span class="input-group-btn">
							<input class="btn btn-default" type="submit" value="Get Buttons" />
			      		</span>
					</div>
					<label class="radio-inline">
						<input type="radio" class="catalog-name" name="catalogName" value="evans" checked /> Evans
					</label>
					<label class="radio-inline">
						<input type="radio" class="catalog-name" name="catalogName" value="msl" /> MSL
					</label>
				</form>
			</div>
		</div>
		<div class="row">
			<div class="col-xs-6 col-md-3">
				<h3>The Default Buttons</h3>
				<div id="theButtons"></div>
			</div>
			<div class="col-xs-6 col-md-3">
				<h3>The Custom Styled Buttons</h3>
				<div id="theOverriddenButtons"></div>
			</div>
		
			<div class="col-xs-6 col-md-3">
				<h3>The JSON Buttons</h3>
				<div id="theJson"></div>
			</div>
		
			<div class="col-xs-6 col-md-3">
				<h3>The Voyager API Data</h3>
				<div id="theData"></div>
			</div>
		</div>
	</div>	
	<script type="text/javascript" src="https://code.jquery.com/jquery-1.12.1.min.js"></script>
	<script src="../static/js/lib/bootstrap.min.js"></script>
	<script type="text/javascript">
		var gifmBase = location.protocol+"//"+location.host+"/";

		$(document).ready(function() {
			$('head').append('<link rel="stylesheet" type="text/css" href="'+gifmBase+'wro/app.css">');
			$("#getButtons").submit(function() {
				getButtons($(this).find(".catalog-name:checked").val(),$(this).find("#bibId").val());
				return false;
			});

			function getButtons(catalogName, bibId) {
				$.ajax({
					url: gifmBase+"catalog-access/get-html-buttons",
					data: {"catalogName":catalogName,"bibId": bibId}
				}).then(function(data) {
					$("#theButtons").html("");
					$.each(data.payload.HashMap,function(mfhd,buttons) {
						var buttonHtml = "";
						$("#theButtons").append("<h4>"+mfhd+"</h4>");
						buttonHtml += "<div id=\"mfhd_"+mfhd+"\">";
						$.each(buttons,function(index,button) {
							buttonHtml += button;
						});
						buttonHtml += '</div>';
						$("#theButtons").append(buttonHtml);
					});
					$("#theOverriddenButtons").html($("#theButtons").html());
				});
				$("#theJson").load(gifmBase+"catalog-access/get-buttons?bibId="+bibId);
				$("#theData").load(gifmBase+"catalog-access/get-holdings?bibId="+bibId);
			}
		});
	</script>
</body>
</html>